export type AdviceTopic =
  | 'love'
  | 'career'
  | 'future'
  | 'fortune'
  | 'longevity'
  | 'descendants'
  | 'health'
  | 'rdPc'
  | 'rdMobile'
  | 'frontend'
  | 'backend'
  | 'pm'
  | 'ops'
  | 'qa'
  | 'bonus'
  | 'sprint'
  | 'promotion'
  | 'stress'

export interface HexagramSeed {
  id: number
  nameCn: string
  nameEn: string
  pinyin: string
  element: '木' | '火' | '土' | '金' | '水'
  keywords: string[]
  classic: string
  imagery: string
  practice: string
}

export interface Hexagram extends HexagramSeed {
  advice: Record<AdviceTopic, string>
}

const hexagramSeeds: HexagramSeed[] = [
  {
    id: 1,
    nameCn: '乾',
    nameEn: 'The Creative',
    pinyin: 'Qián',
    element: '金',
    keywords: ['创造', '远见', '统御'],
    classic: '龙德启势，主动出击而不躁进。',
    imagery: '双天相叠，纯阳如日，催动万物奋起。',
    practice: '把长期战略拆解成可演进的冲刺节奏，让团队有序推进。',
  },
  {
    id: 2,
    nameCn: '坤',
    nameEn: 'The Receptive',
    pinyin: 'Kūn',
    element: '土',
    keywords: ['包容', '滋养', '协作'],
    classic: '厚德载物，以柔顺承载百川。',
    imagery: '大地绵延，静养能量等待播种。',
    practice: '通过倾听与配套资源让团队安心执行，形成良性循环。',
  },
  {
    id: 3,
    nameCn: '屯',
    nameEn: 'Difficulty at the Beginning',
    pinyin: 'Zhūn',
    element: '木',
    keywords: ['开端', '耐心', '探索'],
    classic: '蒙昧初启，宜扶助新芽稳固根基。',
    imagery: '雷雨交织，泥泞中仍有嫩芽冲出。',
    practice: '为创新项目预留缓冲与导师制度，陪伴其渡过混沌期。',
  },
  {
    id: 4,
    nameCn: '蒙',
    nameEn: 'Youthful Folly',
    pinyin: 'Méng',
    element: '水',
    keywords: ['学习', '启蒙', '守正'],
    classic: '以蒙启蒙，循序渐进解惑。',
    imagery: '山泉遮掩，需点亮灯火指路。',
    practice: '建立知识库与复盘机制，减少重复试错的成本。',
  },
  {
    id: 5,
    nameCn: '需',
    nameEn: 'Waiting',
    pinyin: 'Xū',
    element: '水',
    keywords: ['等待', '蓄势', '信任'],
    classic: '需于食，守中以待机缘。',
    imagery: '云下藏雨，耐心酝酿后才能倾盆。',
    practice: '在关键决策上拉长观察期，用数据不断校正判断。',
  },
  {
    id: 6,
    nameCn: '讼',
    nameEn: 'Conflict',
    pinyin: 'Sòng',
    element: '金',
    keywords: ['分辨', '公正', '界限'],
    classic: '有孚窒惕，慎入争端。',
    imagery: '天与水相背，形成张力。',
    practice: '先厘清事实与责任，再设计双赢准则抚平冲突。',
  },
  {
    id: 7,
    nameCn: '师',
    nameEn: 'The Army',
    pinyin: 'Shī',
    element: '火',
    keywords: ['组织', '纪律', '担当'],
    classic: '师出有名，整肃军令而不滥用。',
    imagery: '地中伏水，暗流蓄势以待冲锋。',
    practice: '用明确任务书与复盘仪式让团队保持士气与方向。',
  },
  {
    id: 8,
    nameCn: '比',
    nameEn: 'Holding Together',
    pinyin: 'Bǐ',
    element: '水',
    keywords: ['结盟', '信任', '互助'],
    classic: '比之初吉，慎择同伴。',
    imagery: '水汇成池，众流同向。',
    practice: '通过开放协作平台共享资源，建立互补联盟。',
  },
  {
    id: 9,
    nameCn: '小畜',
    nameEn: 'Small Taming',
    pinyin: 'Xiǎo Chù',
    element: '木',
    keywords: ['积累', '克制', '微调'],
    classic: '柔顺中含刚毅，小畜以畜养势能。',
    imagery: '风行天上，缓慢却持续地塑形。',
    practice: '把大目标拆成日常微习惯并坚持反馈。',
  },
  {
    id: 10,
    nameCn: '履',
    nameEn: 'Treading',
    pinyin: 'Lǚ',
    element: '金',
    keywords: ['礼法', '谨慎', '节奏'],
    classic: '履虎尾不咥亨，戒骄以立身。',
    imagery: '泽上有天，行走如履薄冰。',
    practice: '在高压场景下保持標准作业与复核机制。',
  },
  {
    id: 11,
    nameCn: '泰',
    nameEn: 'Peace',
    pinyin: 'Tài',
    element: '土',
    keywords: ['通达', '和谐', '增长'],
    classic: '天地交泰，阴阳互动而通。',
    imagery: '天地交感，万物畅行。',
    practice: '趁顺势扩张时同步打造风控护栏与制度。',
  },
  {
    id: 12,
    nameCn: '否',
    nameEn: 'Standstill',
    pinyin: 'Pǐ',
    element: '水',
    keywords: ['闭塞', '整顿', '内省'],
    classic: '闭塞不通，宜固本培元。',
    imagery: '天地不交，气机凝滞。',
    practice: '暂停对外扩张，重整流程与人才架构。',
  },
  {
    id: 13,
    nameCn: '同人',
    nameEn: 'Fellowship',
    pinyin: 'Tóng Rén',
    element: '火',
    keywords: ['社群', '共识', '愿景'],
    classic: '同人于野，先难后吉。',
    imagery: '火在天上，光明可供众人追随。',
    practice: '用透明沟通与共享成果培育社区动力。',
  },
  {
    id: 14,
    nameCn: '大有',
    nameEn: 'Possession in Great Measure',
    pinyin: 'Dà Yǒu',
    element: '火',
    keywords: ['丰盛', '主导', '分享'],
    classic: '大有盈实，持盈以守成。',
    imagery: '火照于天，辉煌而不炫。',
    practice: '建立资源分配机制，避免成功反噬。',
  },
  {
    id: 15,
    nameCn: '谦',
    nameEn: 'Modesty',
    pinyin: 'Qiān',
    element: '土',
    keywords: ['谦逊', '平衡', '含蓄'],
    classic: '谦谦君子，终利有终。',
    imagery: '地中有山，藏锋守拙。',
    practice: '把功劳外部化，把学习留给自己与团队。',
  },
  {
    id: 16,
    nameCn: '豫',
    nameEn: 'Enthusiasm',
    pinyin: 'Yù',
    element: '木',
    keywords: ['鼓舞', '节奏', '仪式'],
    classic: '先王以作乐崇德，豫以动众。',
    imagery: '雷出地奋，激起共鸣。',
    practice: '用节庆、里程碑强化团队情绪曲线。',
  },
  {
    id: 17,
    nameCn: '随',
    nameEn: 'Following',
    pinyin: 'Suí',
    element: '金',
    keywords: ['顺势', '调适', '反馈'],
    classic: '随时之义，柔从而不失主见。',
    imagery: '泽中有雷，回声灵敏。',
    practice: '构建快速反馈回路，根据用户声音随迭。',
  },
  {
    id: 18,
    nameCn: '蛊',
    nameEn: 'Work on the Decayed',
    pinyin: 'Gǔ',
    element: '木',
    keywords: ['修复', '净化', '责任'],
    classic: '先甲三日后甲三日，彻底反思。',
    imagery: '山下有风，吹散积弊。',
    practice: '拆旧立新，建立长期维护与稽核制度。',
  },
  {
    id: 19,
    nameCn: '临',
    nameEn: 'Approach',
    pinyin: 'Lín',
    element: '土',
    keywords: ['临近', '指导', '温和'],
    classic: '临民以德，广布教化。',
    imagery: '地上有泽，润物无声。',
    practice: '高层下沉倾听一线，把政策说人话。',
  },
  {
    id: 20,
    nameCn: '观',
    nameEn: 'Contemplation',
    pinyin: 'Guān',
    element: '木',
    keywords: ['洞察', '观察', '启发'],
    classic: '观国之光，柔顺以敬。',
    imagery: '风行地上，遍览全局。',
    practice: '通过用户旅程地图洞察关键触点。',
  },
  {
    id: 21,
    nameCn: '噬嗑',
    nameEn: 'Biting Through',
    pinyin: 'Shì Ké',
    element: '火',
    keywords: ['决断', '执行', '整顿'],
    classic: '噬嗑亨，刚柔相济以决滞。',
    imagery: '雷火交鸣，强光剔除杂质。',
    practice: '集中时间窗清理技术债与制度漏洞。',
  },
  {
    id: 22,
    nameCn: '贲',
    nameEn: 'Grace',
    pinyin: 'Bì',
    element: '火',
    keywords: ['美感', '表达', '包装'],
    classic: '文明以止，外显而内有本。',
    imagery: '山下有火，映照纹理。',
    practice: '打造品牌叙事，让核心价值被看见。',
  },
  {
    id: 23,
    nameCn: '剥',
    nameEn: 'Splitting Apart',
    pinyin: 'Bō',
    element: '金',
    keywords: ['失序', '剥落', '警戒'],
    classic: '剥床以肤，不可不慎。',
    imagery: '山附于地，外强中空。',
    practice: '果断停掉失血项目，把资源回收。',
  },
  {
    id: 24,
    nameCn: '复',
    nameEn: 'Return',
    pinyin: 'Fù',
    element: '木',
    keywords: ['回归', '复苏', '循环'],
    classic: '七日来复，动静相推。',
    imagery: '雷在地中，生机悄起。',
    practice: '重新迭代核心 MVP，从小范围验证。',
  },
  {
    id: 25,
    nameCn: '无妄',
    nameEn: 'Innocence',
    pinyin: 'Wú Wàng',
    element: '金',
    keywords: ['真诚', '无心', '自然'],
    classic: '无妄之往，正气自守。',
    imagery: '天雷无妄，动而有度。',
    practice: '秉持透明与正直，建立公信力缓冲意外。',
  },
  {
    id: 26,
    nameCn: '大畜',
    nameEn: 'Great Taming',
    pinyin: 'Dà Chù',
    element: '土',
    keywords: ['蓄势', '守成', '厚积'],
    classic: '大畜利贞，不利有攸往。',
    imagery: '天在山上，气势稳固。',
    practice: '暂缓扩张，把基础设施补齐。',
  },
  {
    id: 27,
    nameCn: '颐',
    nameEn: 'Nourishment',
    pinyin: 'Yí',
    element: '木',
    keywords: ['滋养', '输入', '口碑'],
    classic: '观颐自求口实，慎言慎食。',
    imagery: '山下有雷，源源不断供给。',
    practice: '投资学习与营养管理，保持组织能量。',
  },
  {
    id: 28,
    nameCn: '大过',
    nameEn: 'Great Exceeding',
    pinyin: 'Dà Guò',
    element: '木',
    keywords: ['承压', '突破', '极限'],
    classic: '栋挠之象，宜以刚健承重。',
    imagery: '泽上有风，波浪相叠。',
    practice: '在关键转折承担重任，同时准备备份方案。',
  },
  {
    id: 29,
    nameCn: '坎',
    nameEn: 'The Abysmal',
    pinyin: 'Kǎn',
    element: '水',
    keywords: ['险境', '专注', '韧性'],
    classic: '习坎有孚，维心亨。',
    imagery: '重水叠陷，考验定力。',
    practice: '建立应急预案并保持信息透明。',
  },
  {
    id: 30,
    nameCn: '离',
    nameEn: 'The Clinging',
    pinyin: 'Lí',
    element: '火',
    keywords: ['明晰', '依附', '传播'],
    classic: '离明虚受，藉光而行。',
    imagery: '双火相依，照亮边界。',
    practice: '用可视化和故事化表达复杂方案。',
  },
  {
    id: 31,
    nameCn: '咸',
    nameEn: 'Influence',
    pinyin: 'Xián',
    element: '金',
    keywords: ['感应', '吸引', '情感'],
    classic: '咸其拇，感于微处。',
    imagery: '泽上有山，共振易动。',
    practice: '经营情绪共鸣，先打动小圈层。',
  },
  {
    id: 32,
    nameCn: '恒',
    nameEn: 'Duration',
    pinyin: 'Héng',
    element: '木',
    keywords: ['恒常', '长期', '承诺'],
    classic: '恒久之道，动静有常。',
    imagery: '雷风相与，循环不息。',
    practice: '制定可持续机制并定期校准。',
  },
  {
    id: 33,
    nameCn: '遯',
    nameEn: 'Retreat',
    pinyin: 'Dùn',
    element: '金',
    keywords: ['退场', '自保', '择机'],
    classic: '遯亨，以退为进。',
    imagery: '天在山上，隐势守拙。',
    practice: '及时止损，等待议价权回升。',
  },
  {
    id: 34,
    nameCn: '大壮',
    nameEn: 'Great Power',
    pinyin: 'Dà Zhuàng',
    element: '火',
    keywords: ['力量', '冲劲', '自信'],
    classic: '大壮利贞，不可专横。',
    imagery: '雷在天上，声势震撼。',
    practice: '大胆发布，但设立红队检视风险。',
  },
  {
    id: 35,
    nameCn: '晋',
    nameEn: 'Progress',
    pinyin: 'Jìn',
    element: '火',
    keywords: ['提升', '曝光', '加速'],
    classic: '明出地上，晋而不息。',
    imagery: '火升于地，逐日而上。',
    practice: '借助舞台与盟友加速品牌升级。',
  },
  {
    id: 36,
    nameCn: '明夷',
    nameEn: 'Darkening of the Light',
    pinyin: 'Míng Yí',
    element: '火',
    keywords: ['隐忍', '保护', '曲线'],
    classic: '明入地中，以柔避害。',
    imagery: '地中藏火，小心守护。',
    practice: '把敏感策略拆分到小团队，降低噪点。',
  },
  {
    id: 37,
    nameCn: '家人',
    nameEn: 'The Family',
    pinyin: 'Jiā Rén',
    element: '木',
    keywords: ['家风', '角色', '日常'],
    classic: '家人有严君，言有物。',
    imagery: '风自火出，温暖却需秩序。',
    practice: '明确家庭或团队仪式与分工，形成默契。',
  },
  {
    id: 38,
    nameCn: '睽',
    nameEn: 'Opposition',
    pinyin: 'Kuí',
    element: '金',
    keywords: ['差异', '对照', '创意'],
    classic: '睽孤，利贞。',
    imagery: '火在泽上，方向相背。',
    practice: '把分歧可视化，设计对话而非压抑。',
  },
  {
    id: 39,
    nameCn: '蹇',
    nameEn: 'Obstruction',
    pinyin: 'Jiǎn',
    element: '水',
    keywords: ['阻碍', '修路', '韧性'],
    classic: '蹇难行，利西南。',
    imagery: '水在山上，路险难行。',
    practice: '请援外部伙伴共解卡点。',
  },
  {
    id: 40,
    nameCn: '解',
    nameEn: 'Deliverance',
    pinyin: 'Xiè',
    element: '木',
    keywords: ['松绑', '释放', '复原'],
    classic: '雷雨并作，险尽而解。',
    imagery: '雷下有雨，清新爽朗。',
    practice: '在危机后安排心理与流程双修复。',
  },
  {
    id: 41,
    nameCn: '损',
    nameEn: 'Decrease',
    pinyin: 'Sǔn',
    element: '金',
    keywords: ['减法', '聚焦', '供养'],
    classic: '损有余以益不足。',
    imagery: '山下有泽，向下输送。',
    practice: '砍掉边缘功能，把能量投向主线。',
  },
  {
    id: 42,
    nameCn: '益',
    nameEn: 'Increase',
    pinyin: 'Yì',
    element: '木',
    keywords: ['增益', '互惠', '成长'],
    classic: '益之用凶无咎，有孚。',
    imagery: '风雷相薄，加速增长。',
    practice: '建立双向激励，越分享越受益。',
  },
  {
    id: 43,
    nameCn: '夬',
    nameEn: 'Breakthrough',
    pinyin: 'Guài',
    element: '金',
    keywords: ['决断', '宣示', '突破'],
    classic: '扬于王庭，断尾求生。',
    imagery: '泽上有天，水势将决。',
    practice: '公开宣布关键决策并匹配执行力。',
  },
  {
    id: 44,
    nameCn: '姤',
    nameEn: 'Coming to Meet',
    pinyin: 'Gòu',
    element: '木',
    keywords: ['偶遇', '提醒', '觉察'],
    classic: '女壮勿用取女。',
    imagery: '天下有风，骤然而至。',
    practice: '面对突发机会先审合规与价值观。',
  },
  {
    id: 45,
    nameCn: '萃',
    nameEn: 'Gathering',
    pinyin: 'Cuì',
    element: '土',
    keywords: ['聚合', '筹备', '动员'],
    classic: '萃聚以正，王假有庙。',
    imagery: '泽地相应，众志成城。',
    practice: '策划峰会或社群日，凝聚人心。',
  },
  {
    id: 46,
    nameCn: '升',
    nameEn: 'Pushing Upward',
    pinyin: 'Shēng',
    element: '木',
    keywords: ['攀升', '扎根', '坚持'],
    classic: '柔以时升，吉。',
    imagery: '地中生木，缓慢上升。',
    practice: '以长期内容或研究慢慢建立权威。',
  },
  {
    id: 47,
    nameCn: '困',
    nameEn: 'Oppression',
    pinyin: 'Kùn',
    element: '水',
    keywords: ['受困', '压缩', '省思'],
    classic: '困于酒食，亨。',
    imagery: '泽无水源，枯竭待补。',
    practice: '利用限制逼出创新，把困难记录成知识资产。',
  },
  {
    id: 48,
    nameCn: '井',
    nameEn: 'The Well',
    pinyin: 'Jǐng',
    element: '水',
    keywords: ['基础', '补给', '传承'],
    classic: '井养而不穷。',
    imagery: '木上有水，日日汲取。',
    practice: '维护基础设施如数据、文档与培训。',
  },
  {
    id: 49,
    nameCn: '革',
    nameEn: 'Revolution',
    pinyin: 'Gé',
    element: '火',
    keywords: ['变革', '洗牌', '焕新'],
    classic: '巳日乃孚，革而信之。',
    imagery: '火在泽上，迅速蔓延。',
    practice: '用公开路线图和试点减轻改革阵痛。',
  },
  {
    id: 50,
    nameCn: '鼎',
    nameEn: 'The Cauldron',
    pinyin: 'Dǐng',
    element: '火',
    keywords: ['承载', '文化', '炼成'],
    classic: '鼎象成器，以诚烹饪。',
    imagery: '火风鼓动，鼎内炼华。',
    practice: '打造旗舰产品或文化仪式定型。',
  },
  {
    id: 51,
    nameCn: '震',
    nameEn: 'The Arousing',
    pinyin: 'Zhèn',
    element: '木',
    keywords: ['惊醒', '启动', '警觉'],
    classic: '震来虩虩，笑言哑哑。',
    imagery: '雷动百里，瞬间唤醒。',
    practice: '用大胆实验唤醒市场，但准备安抚措施。',
  },
  {
    id: 52,
    nameCn: '艮',
    nameEn: 'Keeping Still',
    pinyin: 'Gèn',
    element: '土',
    keywords: ['止息', '边界', '冥想'],
    classic: '艮其背，不获其身。',
    imagery: '两山并立，静止致远。',
    practice: '安排深度专注或静修以复位心绪。',
  },
  {
    id: 53,
    nameCn: '渐',
    nameEn: 'Development',
    pinyin: 'Jiàn',
    element: '木',
    keywords: ['渐进', '培育', '耐心'],
    classic: '女归吉，利贞。',
    imagery: '木在山上，缓慢成林。',
    practice: '用阶梯型 KPI 陪伴长期孵化。',
  },
  {
    id: 54,
    nameCn: '归妹',
    nameEn: 'The Marrying Maiden',
    pinyin: 'Guī Mèi',
    element: '火',
    keywords: ['嫁接', '次序', '平衡'],
    classic: '归妹以娣，跛能履。',
    imagery: '雷泽相遇，次序需调整。',
    practice: '在并购或联盟中明确主次与边界。',
  },
  {
    id: 55,
    nameCn: '丰',
    nameEn: 'Abundance',
    pinyin: 'Fēng',
    element: '火',
    keywords: ['丰盛', '曝光', '节庆'],
    classic: '日中则昃，丰而慎终。',
    imagery: '雷火皆盛，光耀四方。',
    practice: '大型发布后预设冷却期与售后体验。',
  },
  {
    id: 56,
    nameCn: '旅',
    nameEn: 'The Wanderer',
    pinyin: 'Lǚ',
    element: '火',
    keywords: ['游历', '轻装', '适应'],
    classic: '旅小亨，旅贞吉。',
    imagery: '山上有火，随处为家。',
    practice: '保持弹性团队，随市场移动。',
  },
  {
    id: 57,
    nameCn: '巽',
    nameEn: 'The Gentle',
    pinyin: 'Xùn',
    element: '木',
    keywords: ['渗透', '柔顺', '沟通'],
    classic: '巽小亨，利有攸往。',
    imagery: '风入万物，润物细无声。',
    practice: '用内容、教育、微服务持续渗透市场。',
  },
  {
    id: 58,
    nameCn: '兑',
    nameEn: 'The Joyous',
    pinyin: 'Duì',
    element: '金',
    keywords: ['愉悦', '分享', '反馈'],
    classic: '兑亨，以诚悦众。',
    imagery: '泽上有泽，欢声连绵。',
    practice: '设计庆祝与用户共创机制。',
  },
  {
    id: 59,
    nameCn: '涣',
    nameEn: 'Dispersion',
    pinyin: 'Huàn',
    element: '水',
    keywords: ['瓦解', '清理', '重组'],
    classic: '王假有庙，利涉大川。',
    imagery: '风与水散开旧局。',
    practice: '打散层级，组建跨职能应急队。',
  },
  {
    id: 60,
    nameCn: '节',
    nameEn: 'Limitation',
    pinyin: 'Jié',
    element: '金',
    keywords: ['边界', '节奏', '约束'],
    classic: '节以制度，不伤和气。',
    imagery: '水在泽上，蓄而有度。',
    practice: '设立透明指标与配额制度。',
  },
  {
    id: 61,
    nameCn: '中孚',
    nameEn: 'Inner Truth',
    pinyin: 'Zhōng Fú',
    element: '木',
    keywords: ['诚信', '信任', '共鸣'],
    classic: '豚鱼吉，利涉大川。',
    imagery: '风泽交感，内诚外信。',
    practice: '以真诚叙事建立品牌信仰。',
  },
  {
    id: 62,
    nameCn: '小过',
    nameEn: 'Small Exceeding',
    pinyin: 'Xiǎo Guò',
    element: '金',
    keywords: ['谨慎', '细节', '补偿'],
    classic: '小过可过，飞鸟遗音。',
    imagery: '雷山相对，声大势小。',
    practice: '放大小差错并快速修补。',
  },
  {
    id: 63,
    nameCn: '既济',
    nameEn: 'After Completion',
    pinyin: 'Jì Jì',
    element: '水',
    keywords: ['完成', '检查', '守成'],
    classic: '既济终吉，慎终如始。',
    imagery: '水火既济，动静相宜。',
    practice: '交付后建立验收与维护清单。',
  },
  {
    id: 64,
    nameCn: '未济',
    nameEn: 'Before Completion',
    pinyin: 'Wèi Jì',
    element: '水',
    keywords: ['未竟', '过渡', '重塑'],
    classic: '未济亨，小狐汔济。',
    imagery: '火上有水，悬殊未合。',
    practice: '保持试运行心态，随时准备下一版。',
  },
]



const adviceTopics: AdviceTopic[] = [
  'love',
  'career',
  'future',
  'fortune',
  'longevity',
  'descendants',
  'health',
  'rdPc',
  'rdMobile',
  'frontend',
  'backend',
  'pm',
  'ops',
  'qa',
  'bonus',
  'sprint',
  'promotion',
  'stress',
]
const topicLabels: Record<AdviceTopic, string> = {
  love: '姻缘',
  career: '事业',
  future: '前程',
  fortune: '吉凶',
  longevity: '寿命',
  descendants: '子孙',
  health: '健康',
  rdPc: '研发-PC客户端',
  rdMobile: '研发-移动客户端',
  frontend: '研发-前端',
  backend: '研发-服务端',
  pm: '产品',
  ops: '运营',
  qa: '测试',
  bonus: '年终奖',
  sprint: '周任务',
  promotion: '晋升',
  stress: '压力',
}

const elementNotes: Record<HexagramSeed['element'], { label: string; detail: string }> = {
  木: { label: '木 · 生长', detail: '渐进滋养、曲线生长，给新芽空间与光照。' },
  火: { label: '火 · 明德', detail: '照明、传播、激发热情，但需控温防过热。' },
  土: { label: '土 · 承载', detail: '稳住供给与秩序，再承载变化与扩张。' },
  金: { label: '金 · 肃正', detail: '立规矩、明边界，决断而克制，提纯效率。' },
  水: { label: '水 · 智润', detail: '保持弹性与包容，渗透调和，遇阻则绕行。' },
}

const openers = [
  '先定心，再定调',
  '以终为始，收束分歧',
  '守正出奇，少即是多',
  '先稳盘，再放量',
  '划清边界，聚焦要事',
  '以慢为快，养势而动',
  '先排雷，再蓄能',
  '敢于止损，轻装前进',
  '复盘当下，重塑节奏',
  '以数据校正情绪',
  '保持留白，给弹性',
  '重视节奏感，避免过热',
  '先做减法，再谈加速',
]

const pivots = [
  '围绕核心关键词展开「{k1}/{k2}」双线策略',
  '把「{classic}」当戒尺，遇噪音先校验价值观',
  '用「{imagery}」作环境镜像，判断顺逆势',
  '按「{practice}」拆解里程碑，验收每一拍',
  '设置止损与缓冲，拒绝一次性豪赌',
  '复用成熟模式，避免重复造轮子',
  '公开沟通意图，减少误读与内耗',
  '把风险列表化，逐项消减',
  '拉长观测窗，观察反馈曲线',
  '明确角色分工，封装责任边界',
  '沉淀标准与手册，方便移交与扩展',
  '利用盟友与社群，以柔胜刚',
  '为关键节点预留彩排与演练',
]

const actions = [
  '先小范围试运行，再按反馈扩展',
  '设定节奏线，周复盘、月对齐、季度校准',
  '强调可观测性：数据、口碑与交付一并跟踪',
  '把情绪降噪，决策回到事实与指标',
  '保留回滚方案，确保犯错成本可控',
  '放大长板，补齐短板，形成清晰叙事',
  '设计仪式与节庆，维护团队热度',
  '以陪伴和迭代替代一次性对抗',
  '分层管理：核心护城河与实验沙盒分离',
  '标记依赖与阻塞，先拆墙再铺路',
  '用故事化表达向上沟通，争取资源',
  '设定停表条件，避免无期限消耗',
  '留出冷静期，让系统自稳态后再推进',
]

const render = (tpl: string, seed: HexagramSeed): string =>
  tpl
    .replace('{k1}', seed.keywords[0] || '')
    .replace('{k2}', (seed.keywords[1] || seed.keywords[0]) || '')
    .replace('{classic}', seed.classic || '')
    .replace('{imagery}', seed.imagery || '')
    .replace('{practice}', seed.practice || '')

const composeAdvice = (seed: HexagramSeed, topic: AdviceTopic): string => {
  const e = elementNotes[seed.element]
  const o = openers[(seed.id + topic.length) % openers.length]
  const p = pivots[(seed.id * 3 + topic.length) % pivots.length]
  const a = actions[(seed.id * 5 + topic.length) % actions.length]
  const cleanPractice = (seed.practice || '').replace(/[。！？]/g, '')
  const rp = typeof p === 'string' ? render(p, seed) : ''
  const ra = typeof a === 'string' ? render(a, seed) : ''
  const body = [rp, ra].filter(Boolean).join('。')
  return `${seed.nameCn}·${topicLabels[topic]} ｜ ${e.label}：${o}。${body}。象曰「${seed.imagery || ''}」，以「${cleanPractice}」践行。`

}

const topicVariants: Record<AdviceTopic, string[]> = adviceTopics.reduce((acc, topic) => {
  acc[topic] = hexagramSeeds.map((seed) => composeAdvice(seed, topic))
  return acc
}, {} as Record<AdviceTopic, string[]>)

const buildAdvice = (seed: HexagramSeed): Record<AdviceTopic, string> => {
  return adviceTopics.reduce((acc, topic) => {
    const text = topicVariants[topic][seed.id - 1] || ''
    acc[topic] = text
    return acc
  }, {} as Record<AdviceTopic, string>)
}

export const hexagrams: Hexagram[] = hexagramSeeds.map((seed) => ({
  ...seed,
  advice: buildAdvice(seed),
}))
